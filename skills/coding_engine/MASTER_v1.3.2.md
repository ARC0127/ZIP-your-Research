# MASTER v1.3.2 (Coding Engine)


> This file is generated by `tools/build_coding_engine_v1_3.py`.  

> **Normative rules:** `skills/reproducibility/S430_debug_vibe_core.md` + `boot/10_LOCKED_SCOPE_GUARD_v1.3.md`.

---

## Coding Engine: Operating Rules

> **Normative rules:** `skills/reproducibility/S430_debug_vibe_core.md` + `boot/10_LOCKED_SCOPE_GUARD_v1.3.md`.

This section defines the default operating posture for code tasks: minimal viable implementation, diff-first patches, and closure-first verification.

- Always produce a runnable command path (one command, no hidden steps).
- Prefer deleting redundant code over adding new flags.
- If evidence is missing, mark UNKNOWN and request the minimal missing artifact.


---

## 1) Gate & Minimal Intake (copy/paste)

If the request involves code/debug/experiments, enforce:

- **DEBUG_VIBE_CORE: ON**
- **VIBE: M3** (unless user explicitly opts into M2)
- **HCP: ON**

Ask only for the minimal missing items (UNKNOWN allowed):
1) Repo root / artifact (zip path, git commit, or pasted file tree)
2) Entrypoint commands (how to run train/val/infer)
3) Error trace or symptoms (exact)
4) Success criteria (what counts as fixed)

If the user provides none, do not guess. Output a minimal question set.


---

## 2) Diagnosis (M3 discipline)

Produce:
- Symptom restatement (1–2 lines)
- 3 competing hypotheses (ranked)
- Evidence breakpoint plan: Entry → Run → Save → Reload → Eval
- What to read next (exact file paths), otherwise mark UNKNOWN

Do not claim a fix without closed-loop PASS.


---

## 3) Patch style (diff-first, minimal)

- Prefer **small diffs** over new files.
- If new files are required: state why, and state delete/merge plan.
- Output MUST be copy/paste-ready:
  - either unified diff blocks, or
  - full file replacements with file paths.

Always include:
- modified files list
- new files list
- risk list (runtime, serialization, config)


---

## 4) Closed-loop verification (required)

Provide:
- Minimal repro command (MR)
- Closed-loop command (CL): entry → run → artifacts → persistence → reload/val
- Regression matrix: baseline + main + second

If commands are UNKNOWN, output placeholders and ask for the missing info.


---

## 5) Minimalism & anti-scaffolding (v1.3)

Goal: raise code quality by **doing less, but verifiably correct**.

### Rules
- Prefer **one working path** over many knobs.
- New flags/features are allowed only if:
  1) they are exercised by a reproduction command, and
  2) they change output in a measurable way, and
  3) they do not create additional failure modes without tests.

### Anti-patterns (MUST NOT)
- “Future-proof” abstractions that are unused in the current acceptance criteria.
- Adding optional parameters “just in case”.
- Creating new files when a small diff suffices.

### Required output when proposing any refactor
- `minimal viable diff` (what is the smallest change that fixes the issue)
- `cleanup plan` (what will be deleted later if you must add scaffolding)
- `regression command(s)` proving no behavior change (unless desired)


---
